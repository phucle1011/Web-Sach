<div class="container mt-5">
  <h3 class="text-center mb-4 fw-bold">Đơn Hàng Của Tôi</h3>
  <div *ngIf="list.length === 0" class="text-center">
    Không có đơn hàng nào.
  </div>
  <div *ngIf="list.length > 0" class="table-responsive">
    <table class="table table-striped table-hover text-center">
      <thead class="table-dark">
        <tr>
          <th>Đơn hàng ID:</th>
          <th>Ngày đặt hàng:</th>
          <th>Trạng thái:</th>
          <th>Tổng cộng:</th>
          <th>Hành động:</th>
        </tr>
      </thead>
      <tbody *ngFor="let order of list">
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ formatDate(order.createdAt) }}</td>
          <td>
            <ng-container *ngIf="order.status === 'Hoàn thành'">
              <button class="btn btn-success" (click)="confirmCompletion(order.id)">
                Xác nhận Hoàn thành
              </button>
            </ng-container>            
            <ng-container *ngIf="order.status === 'Đã giao hàng thành công'">
              <span class="text-success">Đơn hàng đã giao thành công!</span>
            </ng-container>
            <ng-container
              *ngIf="order.status !== 'Hoàn thành' && order.status !== 'Đã giao hàng thành công'">
              {{ order.status }}
            </ng-container>
          </td>
          <td>{{ formatCurrency(order.total_price) }}</td>
          <td>
            <button class="btn btn-info me-2"
              (click)="toggleDetails(order.id)">Xem</button>

            <ng-container *ngIf="order.status === 'Chờ xác nhận'">
              <button (click)="deleteOrderClient(order)"
                class="btn btn-outline-danger btn-sm custom-btn">
                <i class="bi bi-trash"></i> Hủy đơn
              </button>
            </ng-container>

            <ng-container *ngIf="order.status !== 'Chờ xác nhận'">
              <button class="btn btn-danger me-2" disabled>Không thể
                hủy</button>
            </ng-container>
          </td>
        </tr>

        <tr *ngIf="selectedOrderId === order.id">
          <td colspan="5">
            <table class="table table-bordered mt-2">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Tên</th>
                  <th>Số điện thoại</th>
                  <th>Địa chỉ</th>
                  <th>Trạng thái</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{{ order.id }}</td>
                  <td>{{ order.name }}</td>
                  <td>{{ order.phone }}</td>
                  <td>{{ order.address }}</td>
                  <td>{{ order.status }}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
