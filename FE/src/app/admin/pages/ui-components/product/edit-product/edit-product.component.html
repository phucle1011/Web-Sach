<div class="container mt-4">
  <div class="card p-4 shadow rounded-3">
    <h4 class="text-center">Sửa Thông Tin Sản Phẩm</h4>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label class="form-label">Tên Sản Phẩm</label>
        <input type="text" class="form-control" formControlName="title" />
        <div *ngIf="productForm.get('title')?.invalid && productForm.get('title')?.touched" class="text-danger">
          Tên sản phẩm là bắt buộc.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Tác Giả</label>
        <input type="text" class="form-control" formControlName="author" />
        <div *ngIf="productForm.get('author')?.invalid && productForm.get('author')?.touched" class="text-danger">
          Tác giả là bắt buộc.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Nhà Xuất Bản</label>
        <input type="text" class="form-control" formControlName="publisher" />
        <div *ngIf="productForm.get('publisher')?.invalid && productForm.get('publisher')?.touched" class="text-danger">
          Nhà xuất bản là bắt buộc.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Giá</label>
        <input type="number" class="form-control" formControlName="price" />
        <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched" class="text-danger">
          Giá là bắt buộc và phải là số.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Hình Ảnh</label>
        <div *ngIf="previewImage" class="mb-2">
          <img [src]="previewImage" alt="Image preview" style="width: 100px; height: auto;" />
        </div>
        <input type="file" (change)="onFileSelected($event)" class="form-control" />
      </div>
      

      <div class="form-group">
        <label for="category">Danh mục</label>
        <select id="category" class="form-control" formControlName="categoryId" required>
          <option value="">-- Chọn danh mục --</option>
          <option *ngFor="let category of categories" [value]="category.categoryId">
            {{ category.categoryName }}
          </option>
        </select>
        <div *ngIf="productForm.get('categoryId')?.invalid && productForm.get('categoryId')?.touched" class="text-danger">
          Vui lòng chọn một danh mục.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Mô Tả Ngắn</label>
        <textarea class="form-control" formControlName="shortDescription"></textarea>
        <div *ngIf="productForm.get('shortDescription')?.invalid && productForm.get('shortDescription')?.touched" class="text-danger">
          Mô tả ngắn là bắt buộc.
        </div>
      </div>

      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary" [disabled]="!productForm.valid">Lưu thay đổi</button>
        <a [routerLink]="['/admin/products']" class="btn btn-danger">Hủy</a>
      </div>
    </form>
  </div>
</div>
